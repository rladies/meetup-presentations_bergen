---
title: "Introduction to reproducibility"
author: "Julia Romanowska"
date: "2023-10-24"
format:
  revealjs:
    theme: night
    title-slide-attributes:
      data-background-image: img/marion-botella-rII0mAgBHpY-unsplash.jpg
      data-background-size: cover
---

```{r, include=FALSE}
library(fontawesome)
```


## Outline

- Overview of the book
- Structure of the meetings
- What is reproducibility?
- Why do we need reproducibility?
- Project start _(based on chapter 3)_

::: notes

Go to mentimeter first!

Photo by <a href="https://unsplash.com/@marionb_photography?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Marion Botella</a> on <a href="https://unsplash.com/photos/dried-leaves-on-white-concrete-floor-rII0mAgBHpY?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>

:::

## Overview of the book 

::: {.columns .incremental}
::: {.column width="200px"}
<a href="https://raps-with-r.dev/">
<img alt="Book cover of 'Building reproducible analytical pipelines with R' by Bruno Rodrigues" src="img/raps_book_cover.png" style="width: 200px;">
</a>
:::

::: {.column width="40%"}
Part 1:

- version control
- literate programming
- functional programming
:::

::: {.column width="40%"}
Part 2:

- freezing versions
- packaging code
- testing
- automation
- encapsulation
:::
:::

## Structure of the meetings

Proposed structure:

- short presentation
- exercises/hands-on/live coding
- discussion

::: notes

Presentation summarises the part from the book.

Use exercises from the book and/or some of your own!

Lastly, let's have time to talk, ask questions, ask for help on your problem...

:::

. . .

> _We need your participation!_

::: notes
You can form teams, so that you will need to only prepare a very small part!
:::

# Before we start...

## What is reproducibility?

. . .

::: incremental
Sharing:

- analysis steps
- inputs, outputs
- documentation: _data_ + _code_
- code used to generate each figure
- notes
- versions of software, packages, etc.
:::

::: notes
Ask first and wait for answers.
:::


## Why do we need reproducibility?

::: notes
Ask first and wait for answers.

- do you know how to get to each single figure in the paper you published?
- do you know what is the content of the file X in a folder you created a year ago?
- would it be easy to continue on your/your colleague work?
:::

## {auto-animate=true auto-animate-easing="ease-in-out"}

<img id="map_img" src="img/OpenStreetMap.png" style="height: 80%">

## {auto-animate=true auto-animate-easing="ease-in-out"}

<img id="map_img" src="img/path_gone_wrong.png" style="height: 80%">

## {auto-animate=true auto-animate-easing="ease-in-out"}

<img id="map_img" src="img/path_ok.png" style="height: 80%">

# Fundamentals

## [Prerequisites](https://raps-with-r.dev/prerequisites.html)

::: incremental
- R is not RStudio
- text file vs. binary file
- R packages - _installation and use_
- variables/data in the environment (memory)
- file location, relative and absolute paths
- file extension
:::

::: notes
_variables/data in the environment:_

- check it in "Environment" tab or with `ls()` command
- don't save the image when quitting R:

    - use `R --vanilla` or
    - change in _Global settings_ in RStudio

_file extension:_

- the part of the file name after the last `.`
- can be changed by the user - no magic needed!
- be careful: this should indicate what type of data is in the file
- R-related data: `.rda`, `.rds`, `.RData`
:::

## [Project start](https://raps-with-r.dev/project_start.html)

Analysis of data: Housing in Luxembourg

::: incremental
- **data:** [prices of housing in Luxembourg](https://github.com/b-rodrigues/rap4all/raw/master/datasets/vente-maison-2010-2021.xlsx),    
`r fa("thumbs-down")` nominal prices,    
`r fa("thumbs-up")` per commune,    
`r fa("thumbs-down")` trapped in Excel


- write scripts:    
`r fa("file-excel")` rescue data from Excel,    
`r fa("euro-sign")` convert to real prices,    
`r fa("table")` make some plots/tables
:::

# Hands-on

## [Your project is not done](https://raps-with-r.dev/project_start.html#your-project-is-not-done)

::: incremental
- How easy would it be for someone else to rerun the analysis?
- How easy would it be to update the analysis once new data gets published?
- How easy would it be to reuse this code for other projects?
- What guarantee do we have that if the scripts get run in 5 years, with the same input data, we get the same output?
:::

::: notes
- project documentation + pipeline management + `{renv}`
- testing!
- structuring into functions and packaging
- freezing the code: `{renv}`, Docker
:::

## {background-image="img/joshua-j-cotten-M5Ve4Nfwbto-unsplash.jpg"}

<p style="position: absolute; bottom: 2px; right: 2px; font-size: 16pt;">
Photo by <a href="https://unsplash.com/@jcotten?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Joshua J. Cotten</a> on <a href="https://unsplash.com/photos/black-and-brown-bird-on-wooden-fence-M5Ve4Nfwbto?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
</p>

## {background-image="img/dewang-gupta-5AW7otY6Ocs-unsplash.jpg"}

<p style="position: absolute; bottom: 2px; right: 2px; font-size: 16pt;">
Photo by <a href="https://unsplash.com/@dewang?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Dewang Gupta</a> on <a href="https://unsplash.com/photos/rainbow-on-blue-sky-with-gray-clouds-during-daytime-5AW7otY6Ocs?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
</p>
